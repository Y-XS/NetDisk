<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>注册</title>
    <link rel="stylesheet" href="./style.css" />
    <script type="text/javascript">
        function register() {
            var form = document.getElementById("form");
            var formData = new FormData(form);
            console.log(formData)
            var xhr = new XMLHttpRequest();
            xhr.open("POST", form.action, true);
            xhr.onload = function () {
                // 处理服务器响应
                console.log(xhr.responseText);
            };
            xhr.send(formData);
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="login-wrapper">
            <form id="form" method="post" action="/register">
                <div class="header">欢迎注册</div>
                <div class="form-wrapper">
                    <!-- <label>账号</label> -->
                    <input id="userName" name="userName" class="input-item" type="text" placeholder="账号"><br>
                    <!-- <label>密码</label> -->
                    <input id="password" name="password" class="input-item" type="password" placeholder="密码"><br>
                    <!-- <input id="login" type="submit" value="登录" class="btn"> -->
                    <button id="btn_register" type="button" class="btn">注册</button>

                    <script>
                        let btn = document.getElementById("btn_register");
                        btn.onclick = function () {
                            var userName = document.getElementById("userName").value;
                            var password = document.getElementById("password").value;
                            var xhr = new XMLHttpRequest();
                            xhr.open("POST", form.action, true);
                            xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
                            xhr.onload = function () {
                                // 处理服务器响应
                                var ret = xhr.responseText;
                                alert(ret)
                                if(ret == "注册成功！"){
                                    // location.href="/home.html?user="+encodeURI(userName);
                                    location.href="/login.html";
                                }else{
                                    return;
                                }
                            };
                            xhr.send("userName="+userName+"&password="+password);
                        }
                    </script>
                </div>
            </form>
        </div>
    </div>


</body>

</html>